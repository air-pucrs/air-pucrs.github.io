<nav class="container grid-xl navbar">
  <div class="flex-horizontal-center hide-sm">
    <a style="width: 50%;" href="{{ site.url }}{{ site.baseurl }}" class="logo">
      <img style="max-width: 100%;" src="{{ site.baseurl }}/assets/{{ site.brand_logo }}" alt="Artificial Intelligence Research Group at PUCRS" />
    </a>
  </div>

  <div class="text-center show-sm">
    <a style="width: 100%;" href="{{ site.url }}{{ site.baseurl }}" class="logo flex-centered">
      <img style="max-width: 150px;" src="{{ site.baseurl }}/assets/{{ site.brand_logo }}" alt="Artificial Intelligence Research Group at PUCRS" />
    </a>

    <button href="#modal-menu" style="height: auto;" class="btn btn-members btn-lg btn-outline py-2 open-modal">Menu</button>

  </div>

  <ul class="main-nav">

    <!-- TODO Ajustar css do dropdown -->
    <li class="dropdown mx-4">
      <a href="{{ site.baseurl }}/" class="dropdown-toggle nav-links" style="color:white">Grupos</a>
      <ul class="menu">
        <div class="arrow"></div>
        {% for group in site.data.grupos_list %}
        {% capture grupo_name %}{{ group | first }}{% endcapture %}
        {% assign grupo = site.data.grupos_list[grupo_name] %}
          <li>
            <a href="{{ site.baseurl }}/grupo-{{grupo.link}}" class="dropdown-link">{{grupo.abreviacao}}</a>
          </li>
        {% endfor %} 
      </ul>
    </li>

    <li class="mx-4">
      <a class="nav-links" href="{{ site.baseurl }}/novidades">Novidades</a>
    </li>
    <li class="mx-4">
      <a  class="nav-links" href="{{ site.baseurl }}/integrantes">Integrantes</a>
    </li>
    <li class="mx-4">
      <a  class="nav-links" href="{{ site.baseurl }}/projetos">Projetos</a>
    </li>
    <li class="mx-4">
      <a  class="nav-links" href="{{ site.baseurl }}/publicacoes">Publicações</a>
    </li>
  </ul>
</nav>

<div id="modal-menu" class="modal">
  <ul class="menu" style="background-color: #F5365C;">
      <li class="dropdown mx-4">
        <a class="dropdown-toggle nav-links" style="color:white">Grupos</a>
        <ul class="menu" style="background-color: white;">                 
          {% for group in site.data.grupos_list %}
          {% capture grupo_name %}{{ group | first }}{% endcapture %}
          {% assign grupo = site.data.grupos_list[grupo_name] %}
            <li>
              <a href="{{ site.baseurl }}/grupo-{{grupo.link}}" class="dropdown-link">{{grupo.abreviacao}}</a>
            </li>
          {% endfor %}           
        </ul>
      </li>

      <li class="mx-4">
        <a class="nav-links" href="/novidades">Novidades</a>
      </li>
      <li class="mx-4">
        <a class="nav-links" href="/integrantes">Integrantes</a>
      </li>
      <li class="mx-4">
        <a class="nav-links" href="/projetos">Projetos</a>
      </li>
      <li class="mx-4">
        <a class="nav-links" href="/publicacoes">Publicações</a>
      </li>
  </ul>
</div>


<script>
// Get the button that opens the modal
var btn = document.querySelectorAll("button.open-modal");

// All page modals
var modals = document.querySelectorAll('.modal');

// Get the <span> element that closes the modal
var spans = document.getElementsByClassName("close");

// When the user clicks the button, open the modal
for (var i = 0; i < btn.length; i++) {
 btn[i].onclick = function(e) {
    e.preventDefault();
    modal = document.querySelector(e.target.getAttribute("href"));
    modal.style.display = "block";
 }
}

// When the user clicks on <span> (x), close the modal
for (var i = 0; i < spans.length; i++) {
 spans[i].onclick = function() {
    for (var index in modals) {
      if (typeof modals[index].style !== 'undefined') modals[index].style.display = "none";    
    }
 }
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
     for (var index in modals) {
      if (typeof modals[index].style !== 'undefined') modals[index].style.display = "none";    
     }
    }
}
</script>